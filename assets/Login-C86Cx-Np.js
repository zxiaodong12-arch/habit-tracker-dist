import{u as x,c as u,a as e,t as d,w as k,b as p,p as m,v as h,j as M,q as V,T as C,e as B,k as r,l as S,o as v,d as H}from"./index-BDVJ00ah.js";import{u as N}from"./habits-6yD0-hm_.js";import{_ as T}from"./_plugin-vue_export-helper-DlAUqK2U.js";const q={class:"login-container"},L={class:"login-card"},U={class:"login-header"},z={class:"login-subtitle"},D={class:"form-group"},j={key:0,class:"form-group"},A={class:"form-group"},E=["disabled"],I={key:0},R={key:1,class:"loading-spinner"},F=["disabled"],G={__name:"Login",setup(J){const g=S(),f=x(),w=N(),o=r(!0),l=r(""),n=r(""),i=r(""),a=r(!1),b=()=>{o.value=!o.value,l.value="",n.value="",i.value=""},_=async()=>{var c,s;if(!a.value){a.value=!0;try{o.value?(await f.login(l.value,i.value)).success&&(await w.loadHabits(),g.push("/")):(await f.register(l.value,i.value,n.value||null)).success&&(o.value=!0,l.value="",n.value="",i.value="")}catch(t){const y=(t==null?void 0:t.message)||((s=(c=t==null?void 0:t.response)==null?void 0:c.data)==null?void 0:s.message)||"操作失败";console.error("操作失败:",y,t)}finally{a.value=!1}}};return(c,s)=>(v(),u("div",q,[e("div",L,[e("div",U,[s[3]||(s[3]=e("div",{class:"login-icon"},[e("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),e("circle",{cx:"12",cy:"7",r:"4"})])],-1)),e("h2",null,d(o.value?"欢迎回来":"创建账号"),1),e("p",z,d(o.value?"登录以继续使用习惯追踪器":"注册新账号开始追踪你的习惯"),1)]),e("form",{onSubmit:k(_,["prevent"]),class:"login-form"},[e("div",D,[s[4]||(s[4]=e("label",{for:"username"},[e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),e("circle",{cx:"12",cy:"7",r:"4"})]),p(" 用户名 ")],-1)),m(e("input",{type:"text",id:"username","onUpdate:modelValue":s[0]||(s[0]=t=>l.value=t),required:"",autofocus:"",placeholder:"请输入用户名"},null,512),[[h,l.value]])]),M(C,{name:"slide-fade"},{default:V(()=>[o.value?H("",!0):(v(),u("div",j,[s[5]||(s[5]=e("label",{for:"email"},[e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"}),e("polyline",{points:"22,6 12,13 2,6"})]),p(" 邮箱（可选） ")],-1)),m(e("input",{type:"email",id:"email","onUpdate:modelValue":s[1]||(s[1]=t=>n.value=t),placeholder:"example@email.com"},null,512),[[h,n.value]])]))]),_:1}),e("div",A,[s[6]||(s[6]=e("label",{for:"password"},[e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"}),e("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"})]),p(" 密码 ")],-1)),m(e("input",{type:"password",id:"password","onUpdate:modelValue":s[2]||(s[2]=t=>i.value=t),required:"",placeholder:"请输入密码"},null,512),[[h,i.value]])]),e("button",{type:"submit",class:B(["btn-submit",{loading:a.value}]),disabled:a.value},[a.value?(v(),u("span",R)):(v(),u("span",I,d(o.value?"登录":"注册"),1))],10,E),s[7]||(s[7]=e("div",{class:"form-divider"},[e("span",null,"或")],-1)),e("button",{type:"button",class:"btn-switch",onClick:b,disabled:a.value},d(o.value?"还没有账号？立即注册":"已有账号？立即登录"),9,F)],32)])]))}},Q=T(G,[["__scopeId","data-v-4295546f"]]);export{Q as default};
